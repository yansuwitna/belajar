var dropdownMenu;!function(e){e.fn.serializeObject=function(){var t={},n=this.serializeArray();return e.each(n,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},e.fn.ajaxFileUpload=function(t){var n={params:{},action:"",onStart:function(){},onComplete:function(e){},onCancel:function(){},extensions:["gif","png","jpg","jpeg"],submitButton:null},a=!1;return t&&e.extend(n,t),this.each(function(){var t=e(this);if(!0!==t.data("ajaxUploader-setup")){t.change(function(){a=!1,null==n.submitButton&&s()}),null!=n.submitButton&&n.submitButton.click(function(){a||s()});var s=function(){if(""==t.val())return n.onCancel.apply(t,[n.params]);var s=t.val().split(".").pop().toLowerCase();-1==e.inArray(s,n.extensions)?n.onComplete.apply(t,[{status:!1,message:"The select file type is invalid. File must be "+n.extensions.join(", ")+"."},n.params]):(a=!0,i(t),!1!==n.onStart.apply(t)&&t.parent("form").submit(function(e){e.stopPropagation()}).submit())};t.data("ajaxUploader-setup",!0);var i=function(t){var s="ajaxUploader-iframe-"+Math.round((new Date).getTime()/1e3);e("body").after('<iframe width="0" height="0" style="display:none;" name="'+s+'" id="'+s+'"/>'),e("#"+s).load(function(){!function(e,t){var s,i=e.contentWindow.document.body.innerHTML;try{s=JSON.parse(i)}catch(e){s=i}t.siblings().remove(),t.unwrap(),a=!1,n.onComplete.apply(t,[s,n.params])}(this,t)}),t.wrap(function(){return'<form action="'+n.action+'" method="POST" enctype="multipart/form-data" target="'+s+'" />'}).after(function(){var e,t="";for(e in n.params)t+='<input type="hidden" name="'+e+'" value="'+n.params[e]+'" />';return t})}}})},e.fn.setCenter=function(t){t=e.extend({topBottom:!0,leftRight:!0},t);return this.each(function(){var n=e(this),a=t.parent||e(document);t.leftRight&&n.css("left",(a.innerWidth()-e(this).outerWidth())/2),t.topBottom&&n.css("top",(a.innerHeight()-e(this).outerHeight())/2)})},e.fn.setCss=function(t,n){t=t,n=n;return this.each(function(){void 0!=n&&(!empty(n)||n>0||!0===n)&&e(this).css(t,n)})},e.fn.setAttr=function(t,n){t=t,n=n;return this.each(function(){void 0!=n&&(!empty(n)||n>0||!0===n)&&e(this).attr(t,n)})},e.fn.setId=function(t){t=t||tools.makeRandomId();return this.each(function(){e(this).attr("id",t)})},e.fn.setDisable=function(t,n){t=t,n=n||"disabled";return this.each(function(){!0===t?(e(this).addClass(n),e(this).attr("disabled",!0)):(e(this).removeClass(n),e(this).removeAttr("disabled"))})},e.fn.setHidden=function(t){t=t;return this.each(function(){!0===t?(e(this).addClass("hidden"),e(this).attr("hidden",!0)):(e(this).removeClass("hidden"),e(this).removeAttr("hidden"))})},e.fn.setIcon=function(t,n){t=t,n=n||"left";return this.each(function(){if(void 0!=t&&!empty(t)){var a="fa";-1!==e.inArray(t.substring(0,3),["far","fas","fab"])&&(a=t.substring(0,3),t=t.substring(4,t.length)),"left"===n?e(this).prepend(e("<i>",{class:"icon-left "+a+" fa-"+t})):e(this).append(e("<i>",{class:"icon-right "+a+" fa-"+t}))}})},e.fn.setLabel=function(t){t=t;return this.each(function(){void 0==t.text||empty(t.text)||("left"===t.align?e(this).prepend(e("<span>",{class:"label label-"+t.type,html:t.text,style:"margin-left: 8px"})):e(this).append(e("<span>",{class:"label label-"+t.type,html:t.text,style:"margin-left: 8px"})))})},e.fn.setBadge=function(t){t=t;return this.each(function(){void 0==t||empty(t)||e(this).append(e("<span>",{class:"badge",html:t,style:"margin-left: 8px"}))})},e.fn.setAddOn=function(t,n){t=t,n=n||"left";return this.each(function(){if(void 0!=t&&!empty(t)){var a=e("<span>",{class:"input-group-addon"});if("function"==typeof t.renderTo)a=e("<span>",{class:"input-group-btn"}),t.renderTo(a);else if("object"==typeof t&&void 0!==t.xtype){var s=Imat.CreateComponent(t);a=e("<span>",{class:"input-group-btn"}),s.renderTo(a)}else"object"==typeof t?t.appendTo(a):"icon-"==t.substring(0,5)?a.setIcon(t.substring(5,t.length)):"check-"==t.substring(0,6)?a.append(e("<input>",{type:"checkbox",name:t.substring(6,t.length)})):"radio-"==t.substring(0,6)?a.append(e("<input>",{type:"radio",name:t.substring(6,t.length)})):a.html(t);"left"===n?e(this).prepend(a):e(this).append(a)}})},e.fn.setClass=function(t,n){t=t,n=0!=n;return this.each(function(){void 0!=t&&!empty(t)&&n?e(this).addClass(t):e(this).removeClass(t)})},e.fn.autoGrow=function(){return this.each(function(){var t=e(this).get(0);t.style.overflow="hidden",t.style.height=0,t.style.height=this.scrollHeight+"px",t.addEventListener("keyup",function(){this.style.overflow="hidden",this.style.height=0,this.style.height=this.scrollHeight+"px"},!1)})},e.fn.clearElement=function(){return this.each(function(){if(void 0!=tinymce&&tinymce.editors&&tinymce.editors.length>0)for(var t=tinymce.editors.length-1;t>=0;t--)tinymce.editors[t].remove();e(this).empty()})}}(jQuery),String.prototype.format=function(){var e=arguments;return this.replace(/\{(\d+)\}/g,function(t,n){return e[n]})},Array.prototype.remove=function(e,t){var n=$.grep(this,function(n){return n[e]!==t});return this.length=0,this.push.apply(this,n),this};var empty=function(e){return""==e||void 0==e||null==e},implements=function(){if(arguments.length>1)for(i=1;i<arguments.length;i++)arguments[i].call(arguments[0])},cookie={set:function(e,t,n){e="COOKIE_"+uniqueID+"_"+e;var a=new Date;a.setDate(a.getDate()+n),document.cookie=e+"="+escape(t)+(null==n?"":";expires="+a.toGMTString())+";path=/"},get:function(e){e="COOKIE_"+uniqueID+"_"+e;return document.cookie.length>0?(start=document.cookie.indexOf(e+"="),-1!=start?(start=start+e.length+1,end=document.cookie.indexOf(";",start),-1==end&&(end=document.cookie.length),unescape(document.cookie.substring(start,end))):void 0):""}},tools={stringify:function(e){var t=typeof e;if("object"==t||null===e)return"string"==t?'"'+e+'"':e;var n,a,s=[],i=e&&e.constructor==Array;for(n in e)t=typeof(a=e[n]),e.hasOwnProperty(n)&&("string"==t?a='"'+a+'"':"object"==t&&null!==a&&(a=tools.stringify(a)),s.push((i?"":'"'+n+'":')+String(a)));return(i?"[":"{")+String(s)+(i?"]":"}")},makeRandomId:function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<5;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return"imat-"+e},getScrollBarWidth:function(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var a=n.offsetWidth;return e.parentNode.removeChild(e),t-a},generateURL:function(e,t){e+="?";return"object"==typeof t&&$.each(t,function(t,n){e+=t+"="+n+"&"}),e=e+"_dc="+(new Date).getTime()}},Imat={baseURL:"",baseEvents:["blur","change","click","dblclick","focus","hover","keydown","keypress","keyup","show","hide"],defaultSettings:{id:"",disabled:!1,hidden:!1,label:{type:"default",text:""},tooltip:null,popover:null,badge:"",cls:"",style:{},role:"",width:"",height:"",top:"",bottom:"",left:"",right:"",margin:"",renderTo:""},init:function(){var e=new Imat.Loading;$(document).ajaxStart(function(){e.show()}).ajaxStop(function(){e.hide()})},getCrud:function(e,t){try{e=atob(e.substring(5,e.length));return $.parseJSON(e)[t]}catch(e){return!1}},CreateComponent:function(e){var t=null;switch(e.xtype){case"column":t=new Imat.Column(e);break;case"panel":t=new Imat.Panel(e);break;case"layout":t=new Imat.Layout(e);break;case"button":t=new Imat.Button(e);break;case"buttongroup":t=new Imat.ButtonGroup(e);break;case"dropdown":t=new Imat.DropDown(e);break;case"navbar":t=new Imat.NavBar(e);break;case"navs":t=new Imat.Navs(e);break;case"editor":t=new Imat.Editor(e);break;case"combobox":t=new Imat.ComboBox(e);break;case"form":t=new Imat.Form(e);break;case"label":t=new Imat.Label(e);break;case"textbox":t=new Imat.TextBox(e);break;case"checkbox":t=new Imat.CheckBox(e);break;case"imagebox":t=new Imat.ImageBox(e);break;case"html":t=new Imat.HTML(e);break;case"tinymce":t=new Imat.TinyMCE(e);break;case"frame":t=new Imat.Frame(e);break;case"progress":t=new Imat.ProgressBar(e);break;case"metrics":t=new Imat.Metrics(e)}return t},EventListener:function(){var e=this;e.events={},e.addEvent=function(t,n){"function"==typeof n&&(e.events[t]=n)},e.fireEvent=function(t,n,a){a=a||e;e.events.hasOwnProperty(t)&&"function"==typeof e.events[t]&&e.events[t].apply(a,n),e.settings.hasOwnProperty(t)&&"function"==typeof e.settings[t]&&e.settings[t].apply(a,n)},e.setEvent=function(t){return $.each(Imat.baseEvents,function(n,a){var s="on"+(a=a).substring(0,1).toUpperCase()+a.substring(1,a.length).toLowerCase();e[a]=function(){t.trigger(a)},e[s]=function(t){e.addEvent(s,t)},t.on(a,function(){e.fireEvent(a,[],this),e.fireEvent(s,[])})}),result}},BaseComponent:function(){var e=this;e.base=null,e.initComponent=function(t){t.setId(e.settings.id),t.setDisable(e.settings.disabled),t.setClass(e.settings.cls),t.setAttr("role",e.settings.role),e.initLayout(t),e.initTooltip(t)},e.initLayout=function(t){t.setHidden(e.settings.hidden),t.setCss("width",e.settings.width),t.setCss("height",e.settings.height),t.setCss("top",e.settings.top),t.setCss("left",e.settings.left),t.setCss("right",e.settings.right),t.setCss("bottom",e.settings.bottom),t.setCss("margin",e.settings.margin),t.css(e.settings.style)},e.initTooltip=function(t){null!=e.settings.tooltip&&t.tooltip(e.settings.tooltip),null!=e.settings.popover&&t.popover(e.settings.popover)},e.addClass=function(t){e.element.addClass(t)},e.removeClass=function(t){e.element.removeClass(t)},e.clearClass=function(){e.element.removeAttr("class")},e.append=function(t){e.element.append(t)},e.prepend=function(t){e.element.prepend(t)},e.wrap=function(t){e.element.wrap(t)},e.show=function(){null!=e.base?e.base.show():e.element.show()},e.hide=function(){null!=e.base?e.base.hide():e.element.hide()},e.focus=function(){e.element.focus()},e.setDisabled=function(t){e.element.setDisable(t)},e.setSettings=function(t){e.settings=t,e.createComponent()},e.getSettings=function(){return e.settings},e.setId=function(t){e.id=t,e.element.attr("id",t)},e.getId=function(){return e.element.attr("id")},e.setElement=function(t){e.element=t,e.createComponent()},e.getElement=function(){return e.element},e.setSize=function(t){var n=t||e.settings.size;empty(n)||e.element.wrap($("<div>",{class:n}))},e.renderTo=function(t){empty(t)||(e.element.appendTo(t),e.setSize(),e.parent=t)}},ContainerComponent:function(){var e=this;e.getComponent=function(e){return"function"==typeof e.renderTo?e:"object"==typeof e&&Imat.CreateComponent(e)},e.getItemId=function(e,t){return"function"==typeof e.getId?e.getId():t},e.getItem=function(t){return"string"==typeof t?e.itemObject[t]:e.itemArray[t]},e.addItem=function(t,n){"object"==typeof t.itemObject&&$.extend(e.itemObject,t.itemObject),e.itemArray[n]=t,e.itemObject[e.getItemId(t,n)]=t},e.setHeader=function(t){empty(t)?(e.header.hide(),e.body.removeClass("with-header")):(e.body.addClass("with-header"),e.header.html(t),e.header.show())},e.setFooter=function(t){empty(t)?(e.footer.hide(),e.body.removeClass("with-footer")):"string"==typeof t?(e.body.addClass("with-footer"),e.footer.html(t),e.footer.show()):(e.body.addClass("with-footer"),(t=e.getComponent(t)).renderTo(e.footer),e.footer.show())},e.setValue=function(t,n){var a=e.getItem(t);a&&"function"==typeof a.setValue&&a.setValue(n)},e.getValue=function(t){var n=e.getItem(t),a="";return n&&"function"==typeof n.getValue&&(a=n.getValue()),a}},InputComponent:function(){var e=this;e.base=null,e.container=$("<div>",{class:"input-group"}),e.setSize=function(t){var n=t||e.settings.size;empty(n)||e.base.wrap($("<div>",{class:n}))},e.renderTo=function(t){empty(t)||(empty(e.settings.leftAddon)&&empty(e.settings.rightAddon)?(e.element.appendTo(t),e.base=e.element):(e.container.append(e.element),e.container.setAddOn(e.settings.leftAddon,"left"),e.container.setAddOn(e.settings.rightAddon,"right"),e.container.appendTo(t),e.base=e.container),e.setSize(),e.parent=t)}},DataSource:function(){var e=this;e.getDataSource=function(t){if(e.settings.datasource.params=t||e.settings.datasource.params,e.params=e.settings.datasource.params,"array"==e.settings.datasource.type){e.settings.datasource.data;null!=e.settings.datasource.data&&(e.data=e.settings.datasource.data,e.processDatasource())}else"ajax"==e.settings.datasource.type&&$.ajax({url:e.settings.datasource.url,type:e.settings.datasource.method||"POST",data:e.settings.datasource.params||{},dataType:"json",success:function(t){t.success||void 0==t.redirect||(parent.location=t.redirect),e.data=t.rows,e.processDatasource()}})},e.setDataSource=function(t){$.extend(e.settings.datasource,t),e.getDataSource()}},Label:function(e){implements(this,Imat.BaseComponent);var t=this;return t.element=$("<label>",{href:"javascript:void(0)"}),t.init=function(e){t.settings=$.extend({},Imat.defaultSettings,{text:"Label",iconCls:"",iconPosition:"left",form:!0},e)},t.createComponent=function(){t.initComponent(t.element),t.element.setClass("control-label",t.settings.form),t.element.html(t.settings.text),t.element.setIcon(t.settings.iconCls,t.settings.iconPosition)},t.init(e),t.createComponent(),t.renderTo(t.settings.renderTo),t},HTML:function(e){implements(this,Imat.BaseComponent);var t=this;return t.element=$("<div>",{class:"html-object"}),t.init=function(e){t.settings=$.extend({},Imat.defaultSettings,{content:""},e)},t.getContent=function(){return t.element.html()},t.setContent=function(e){return t.element.html(e)},t.createComponent=function(){t.initComponent(t.element),t.element.html(t.settings.content)},t.init(e),t.createComponent(),t.renderTo(t.settings.renderTo),t},Frame:function(e){implements(this,Imat.BaseComponent);var t=this;return t.url="",t.frame=$("<iframe>",{name:"imat-frame",src:t.url,id:"imat-frame"}),t.element=$("<div>",{class:"imat-frame"}),t.element.append(t.frame),t.init=function(e){t.settings=$.extend({},Imat.defaultSettings,{content:""},e)},t.createComponent=function(){t.initComponent(t.element)},t.navigate=function(e,n){e+="?iframe=ya",void 0!=n&&$.each(n,function(t,n){e+="&"+t+"="+n}),t.url=e,t.frame.attr("src",t.url+"&_dc="+(new Date).getTime())},t.print=function(){try{window.frames["imat-frame"].focus(),window.frames["imat-frame"].print()}catch(e){document.getElementById("imat-frame").contentWindow.print()}},t.save=function(){t.navigate(t.url+"&save=Y")},t.reload=function(){t.frame.attr("src",t.url+"&_dc="+(new Date).getTime())},t.init(e),t.createComponent(),t.renderTo(t.settings.renderTo),t},Button:function(e){implements(this,Imat.BaseComponent);var t=this;return t.element=$("<a>",{href:"javascript:void(0)",class:"btn"}),t.init=function(e){t.settings=$.extend({},Imat.defaultSettings,{text:"",iconCls:"",iconPosition:"left",handler:function(){}},e)},t.createComponent=function(){t.initComponent(t.element),t.element.html(t.settings.text),t.element.setIcon(t.settings.iconCls,t.settings.iconPosition),t.element.setBadge(t.settings.badge),t.element.setLabel(t.settings.label),t.element.setClass("btn-default",empty(t.settings.cls)),t.element.setClass("btn-icon-only",empty(t.settings.text)),t.element.click(function(e){if(t.settings.onTable&&$(this).closest("td").click(),!t.settings.hidden&&!t.settings.disabled){var n=t.settings.handler;"function"==typeof n?n.call():"string"==typeof n&&window[n]()}})},t.init(e),t.createComponent(),t.renderTo(t.settings.renderTo),t},Column:function(e){implements(this,Imat.BaseComponent,Imat.ContainerComponent);var t=this;return t.element=$("<div>",{class:"column"}),t.row=$("<div>",{class:"row"}),t.element.append(t.row),t.init=function(e){t.settings=$.extend({},Imat.defaultSettings,{labelWidth:"",fullSize:!1,items:[]},e),t.items=t.settings.items,t.itemArray=[],t.itemObject={}},t.createComponent=function(){t.initComponent(t.element),t.createItems(),t.element.setClass("fullsize",t.settings.fullSize)},t.createItems=function(){for(var e=0;e<t.items.length;e++)if(null!==t.items[e]){var n=t.items[e],a=$("<div>"),s=$("<label>",{class:"control-label"}).setClass(t.settings.labelWidth);"function"==typeof n.renderTo?n.renderTo(a):"object"==typeof n&&(n=Imat.CreateComponent(n)).renderTo(a);var i=n.getSettings().fieldLabel;void 0==i||empty(i)||(s.html(i),a.prepend(s));var o="function"==typeof n.getSettings?n.getSettings().cols:"";a.setClass(o),t.addItem(n,e),t.row.append(a)}},t.init(e),t.createComponent(),t.renderTo(t.settings.renderTo),t},Layout:function(e){implements(this,Imat.BaseComponent,Imat.ContainerComponent);var t=this;return t.element=$("<div>",{class:"imat-layout"}),t.init=function(e){t.settings=$.extend({},Imat.defaultSettings,{items:[]},e),t.items=t.settings.items,t.itemArray=[],t.itemObject={}},t.createComponent=function(){t.initComponent(t.element),t.createItems()},t.createItems=function(){for(var e=0;e<t.items.length;e++)if(null!==t.items[e]){var n=t.items[e],a=$("<div>");"function"==typeof n.renderTo?n.renderTo(a):"object"==typeof n&&(n=Imat.CreateComponent(n)).renderTo(a);var s="function"==typeof n.getSettings?n.getSettings().itemHeight:"";a.setCss("max-height",s),t.addItem(n,e),t.element.append(a)}},t.init(e),t.createComponent(),t.renderTo(t.settings.renderTo),t},ButtonGroup:function(e){implements(this,Imat.BaseComponent,Imat.ContainerComponent);var t=this;return t.element=$("<div>",{class:"btn-group"}),t.init=function(e){t.settings=$.extend({},Imat.defaultSettings,{items:[],onTable:!1},e),t.items=t.settings.items,t.itemArray=[],t.itemObject={}},t.createComponent=function(){t.initComponent(t.element),t.createItems()},t.createItems=function(){for(var e=0;e<t.items.length;e++)if(null!==t.items[e]){var n=t.getComponent(t.items[e]);t.settings.onTable&&(n.settings.onTable=!0),n&&n.renderTo(t.element),t.addItem(n,e)}},t.init(e),t.createComponent(),t.renderTo(t.settings.renderTo),t},DropDown:function(e){implements(this,Imat.BaseComponent,Imat.ContainerComponent);var t=this,n=$("<span>",{class:"caret"});return t.button=$("<a>",{href:"javascript:void(0)",class:"btn btn-default"}),t.split=$("<a>",{href:"javascript:void(0)",class:"btn btn-default btn-split",html:n}),t.dropdown=$("<ul>",{class:"dropdown-menu",role:"menu"}),t.element=$("<div>",{class:"dropdown btn-group"}),t.init=function(e){t.settings=$.extend({},Imat.defaultSettings,{text:"",iconCls:"",iconPosition:"left",direction:"left",split:!1,form:!1,items:[]},e),t.items=t.settings.items,t.itemArray=[],t.itemObject={}},t.createComponent=function(){t.initLayout(t.element),t.id=t.settings.id?t.settings.id:tools.makeRandomId(),t.button.html(t.settings.text),t.button.setClass(t.settings.cls),t.button.setDisable(t.settings.disabled),t.button.setIcon(t.settings.iconCls,t.settings.iconPosition),t.button.setId(t.id+"-button"),t.button.setClass("btn-icon-only",empty(t.settings.text)),t.split.setId(t.id+"-split"),t.split.setClass(t.settings.cls),t.split.setDisable(t.settings.disabled),t.dropdown.setId(t.id+"-dropdown"),t.dropdown.setClass("dropdown-menu-"+t.settings.direction),t.element.setId(t.id),t.settings.form&&t.dropdown.setClass("dropdown-form"),t.settings.split?(t.split.setClass("dropdown-toggle"),t.split.setAttr("data-toggle","dropdown"),t.split.setAttr("aria-expanded","false"),t.element.append(t.button),t.element.append(t.split),t.element.append(t.dropdown),t.button.click(function(e){var n=t.settings.handler;"function"==typeof n?n.call():"string"==typeof n&&window[n]()})):(t.button.setClass("dropdown-toggle"),t.button.setAttr("data-toggle","dropdown"),t.button.setAttr("aria-expanded","false"),t.button.append(" ").append(n),t.element.append(t.button),t.element.append(t.dropdown)),t.createItems()},t.createItems=function(){for(var e=0;e<t.items.length;e++)if(null!==t.items[e]){var n=t.getComponent(t.items[e]),a=$("<li>",{role:"presentation"});n&&(n.clearClass(),n.initComponent(n.element),n.renderTo(a)),t.addItem(n,e),t.dropdown.append(a)}},t.setDisabled=function(e){t.button.setDisable(e),t.split.setDisable(e)},t.init(e),t.createComponent(),t.renderTo(t.settings.renderTo),t},TextBox:function(e){implements(this,Imat.EventListener,Imat.BaseComponent,Imat.InputComponent);var t=this;return t.element=$("<input>",{class:"form-control",type:"text"}),t.init=function(e){t.settings=$.extend({},Imat.defaultSettings,{dataIndex:"textbox",type:"text",placeholder:"",autoGrow:!1,allowBlank:!0,readOnly:!1,minlength:0,maxlength:0,min:null,max:null,leftAddon:"",rightAddon:"",dateFormat:"dd-mm-yy",align:"",extensions:"",rows:"",size:"",cls:"",value:"",onSubmit:function(){}},e)},t.createComponent=function(){if("textarea"==t.settings.type)t.element=$("<textarea>",{class:"form-control"}),t.element.css("height","auto");else if("static"==t.settings.type)t.element=$("<p>",{class:"form-control-static"}).html(t.settings.value);else if("file"==t.settings.type){var e=$("<div>",{class:"imat browse-button"}),n=$("<input>",{type:"file",id:t.settings.dataIndex+"_file",name:t.settings.dataIndex+"_file"}),a=$("<a>",{href:"javascript:void(0)",class:"btn btn-default",html:"Browse"}).setIcon("folder-open");e.append(n),e.append(a),n.setAttr("accept",t.settings.extensions),n.change(function(e){t.element.val($(this).val().split("\\").pop())}),t.element.setCss("height","auto"),t.settings.type="text",t.settings.rightAddon=e}t.settings.id=t.settings.dataIndex,t.initComponent(t.element),t.setValue(t.settings.value),t.element.setCss("text-align",t.settings.align),t.element.setClass(t.settings.cls),t.element.setAttr("type",t.settings.type),t.element.setAttr("name",t.settings.dataIndex),t.element.setAttr("maxlength",t.settings.maxlength),t.element.setAttr("minlength",t.settings.minlength),t.element.setAttr("placeholder",t.settings.placeholder),t.element.setAttr("size",t.settings.size),t.element.setAttr("rows",t.settings.rows),t.element.setAttr("readonly",t.settings.readOnly),t.element.blur(function(e){t.fireEvent("onBlur",["a","b"]),t.isValid()}),"textarea"!=t.settings.type&&t.element.keydown(function(e){if(13==e.which){e.preventDefault();var n=t.settings.onSubmit;"function"==typeof n?n.call():"string"==typeof n&&window[n]()}}),"date"==t.settings.type&&(t.element.setAttr("type","text"),t.element.datepicker({dateFormat:t.settings.dateFormat,changeMonth:!0,changeYear:!0,onClose:function(e,n){$(this).focus(),"function"==typeof t.settings.onClose&&t.settings.onClose.call()},onSelect:function(e,t){$(this).focus()}})),"number"==t.settings.type&&(t.element.setAttr("type","text"),t.element.keydown(function(e){-1===$.inArray(e.keyCode,[46,8,9,27,13,110,190])&&(65!==e.keyCode||!0!==e.ctrlKey&&!0!==e.metaKey)&&(e.keyCode>=35&&e.keyCode<=40||-1===$.inArray(e.keyCode,[48,49,50,51,52,53,54,55,56,57,58,96,97,98,99,100,101,102,103,104,105,187,189])&&e.preventDefault())}),t.element.on("input",function(){null!=t.settings.min&&$(this).val()<t.settings.min&&!empty($(this).val())&&$(this).val(t.settings.min),null!=t.settings.max&&$(this).val()>t.settings.max&&!empty($(this).val())&&$(this).val(t.settings.max)}),t.element.bind("paste",function(e){return!1}))},t.getValue=function(){return t.element.val()},t.setValue=function(e){t.element.val(e),t.settings.autoGrow&&"textarea"==t.settings.type&&t.element.autoGrow(),"static"==t.settings.type&&t.element.html(e)},t.length=function(){return t.getValue().length},t.setReadOnly=function(e){t.element.setAttr("readonly",e)},t.isValid=function(){var e=!0,n=t.getValue(),a=t.length();return!1===t.settings.allowBlank&&empty(n)&&(e=!1),t.settings.minlength>0&&a<t.settings.minlength&&(e=!1),t.settings.maxlength>0&&a>t.settings.maxlength&&(e=!1),e?t.element.parent().removeClass("has-error"):t.element.parent().addClass("has-error"),e},t.init(e),t.createComponent(),t.renderTo(t.settings.renderTo),t},ComboBox:function(e){implements(this,Imat.EventListener,Imat.BaseComponent,Imat.InputComponent,Imat.DataSource);var t=this;return t.element=$("<select>",{class:"form-control"}),t.data=[],t.params={},t.onLoad=function(e){t.addEvent("onLoad",e)},t.onComplete=function(e){t.addEvent("onComplete",e)},t.onChange=function(e){t.element.change(e)},t.change=function(){t.element.change()},t.init=function(e){t.settings=$.extend({},Imat.defaultSettings,{dataIndex:"combobox",allowBlank:!0,leftAddon:"",rightAddon:"",value:"",size:"",autoLoad:!0,emptyText:"",onTable:!1,select2:!1,line:!1,datasource:{type:"",data:null,url:""}},e),t.settings.data&&(t.settings.datasource={type:"array",data:t.settings.data})},t.createComponent=function(){t.settings.id=t.settings.dataIndex,t.initComponent(t.element),t.element.setAttr("name",t.settings.dataIndex),t.element.blur(function(e){t.isValid()}),t.element.change(function(){t.fireEvent("onChange",["a","b"])});var e=t.settings.select2?"select2-blur":"blur";t.element.on(e,function(){t.isValid()}),t.settings.autoLoad&&t.getDataSource()},t.processDatasource=function(){t.element.empty(),(t.settings.emptyText||t.settings.onTable)&&t.element.append($("<option>",{value:"",text:t.settings.emptyText}));for(var e=t.data,n=0;n<e.length;n++){var a=null!=t.settings.format?t.settings.format.format(e[n].key,e[n].value):e[n].value,s=void 0!==e[n].params?e[n].params:"",i=e[n].key==t.settings.value,o=$("<option>",{value:e[n].key,selected:i,text:a}).setAttr("data-params",s);t.element.append(o)}setTimeout(function(){if(void 0!==e&&e.length&&1==e.length&&(t.element.find('option[value=""]').remove(),t.element.val(e[0].key)),t.settings.select2){var n={};n=t.settings.onTable?{width:t.element.parent().width()}:n,n=t.element.parent().parent().hasClass("navbar-form")?{width:"resolve"}:{},t.settings.line&&t.element.closest(".select2-container").addClass("has-line"),t.element.select2(n)}t.fireEvent("onLoad",[e]),t.fireEvent("onComplete",[e])},1)},t.clear=function(){t.setDataSource({type:"array",data:[]})},t.getValue=function(){return empty(t.element.val())?t.element.find("option").filter(":selected").val():t.element.val()},t.setValue=function(e){t.settings.select2&&t.element.select2("val",e),t.element.val(e)},t.getParams=function(){return t.element.find("option:selected").data("params")},t.isValid=function(){var e=!(!1===t.settings.allowBlank&&empty(t.getValue()));return e?t.element.parent().removeClass("has-error"):t.element.parent().addClass("has-error"),e},t.init(e),t.createComponent(),t.renderTo(t.settings.renderTo),t},CheckBox:function(e){implements(this,Imat.EventListener,Imat.BaseComponent,Imat.InputComponent,Imat.DataSource);var t=this;return t.element=$("<div>",{class:"check"}),t.data=[],t.params={},t.onLoad=function(e){t.addEvent("onLoad",e)},t.onComplete=function(e){t.addEvent("onComplete",e)},t.init=function(e){t.settings=$.extend({},Imat.defaultSettings,{dataIndex:"textbox",allowBlank:!0,type:"checkbox",value:"",inline:!1,autoLoad:!0,datasource:{type:"",data:null,url:""}},e),t.settings.data&&(t.settings.datasource={type:"array",data:[t.settings.data]})},t.createComponent=function(){t.settings.id=t.settings.dataIndex,t.initComponent(t.element),t.element.find("input").click(function(e){!1===t.isValid()?$(this).parent().parent().addClass("has-error"):$(this).parent().parent().removeClass("has-error")}),t.settings.autoLoad&&t.getDataSource()},t.processDatasource=function(){t.element.empty();for(var e=t.data,n=0;n<e.length;n++){var a=null!=t.settings.format?t.settings.format.format(e[n].key,e[n].value):e[n].value,s=void 0!==e[n].params?e[n].params:"",i=e[n].key==t.settings.value,o=$("<div>",{class:t.settings.type+" "+t.settings.class}),r=$("<label>",{html:"&nbsp;",for:t.settings.dataIndex+e[n].key});if("static"==t.settings.type)var l=$("<span>",{style:"font-size: 15px",class:"fa fa-"+(i?"check-circle text-green":"times-circle text-red")}).setDisable(t.settings.disabled);else l=$("<input>",{class:"styled cek",type:t.settings.type,name:t.settings.dataIndex+("checkbox"==t.settings.type&&e.length>1?"[]":""),id:t.settings.dataIndex+e[n].key,value:e[n].key,checked:i}).setAttr("data-params",s).setDisable(t.settings.disabled).click(function(){t.isValid()});t.settings.inline&&(o.removeAttr("class"),o.addClass(t.settings.type+"-inline")),o.append(l),empty(a)?(l.css("margin-right",0),l.css("position","relative")):o.append(r.append(a)),t.element.append(o)}setTimeout(function(){t.fireEvent("onLoad",[e]),t.fireEvent("onComplete",[e])},1)},t.setDisabled=function(e){t.element.setDisable(e),t.element.find("input").setDisable(e)},t.getValue=function(){var e=t.element.find("input").filter(":checked").val();return e||""},t.setValue=function(e){if(empty(e))t.element.find("input:checked").prop("checked",!1),t.element.find("span").removeClass("text-green"),t.element.find("span").removeClass("fa-check-circle"),t.element.find("span").addClass("text-red"),t.element.find("span").addClass("fa-times-circle");else{var n=(e+"").split(",");$.each(n,function(e,n){t.element.find('input[value="'+n+'"]').prop("checked",!0)}),t.settings.data&&(e==t.settings.data.key?(t.element.find("span").removeClass("text-red"),t.element.find("span").removeClass("fa-times-circle"),t.element.find("span").addClass("text-green"),t.element.find("span").addClass("fa-check-circle")):(t.element.find("span").removeClass("text-green"),t.element.find("span").removeClass("fa-check-circle"),t.element.find("span").addClass("text-red"),t.element.find("span").addClass("fa-times-circle")))}},t.setType=function(e){t.settings.type=e,t.processDatasource()},t.getParams=function(){return t.element.find("input:checked").data("params")},t.getItem=function(e){return t.element.find('input[value="'+e+'"]')},t.isValid=function(){return!(!1===t.settings.allowBlank&&empty(t.getValue()))?(t.element.parent().removeClass("has-error"),!0):(t.element.parent().addClass("has-error"),!1)},t.init(e),t.createComponent(),t.renderTo(t.settings.renderTo),t},TinyMCE:function(e){implements(this,Imat.EventListener,Imat.BaseComponent);var t=this;return t.onLoad=function(e){t.addEvent("onLoad",e)},t.element=$("<textarea>",{class:"imat-tinymce"}),t.init=function(e){t.settings=$.extend({},Imat.defaultSettings,{dataIndex:"textbox",allowBlank:!0,size:"",simple:!1,value:""},e)},t.createComponent=function(){t.settings.id=t.settings.dataIndex,t.initComponent(t.element),t.element.html(t.settings.value),t.element.setAttr("name",t.settings.dataIndex)},t.initMCE=function(){t.settings.simple?(t.destroy(),t.element.tinymce({theme:"modern",menubar:!1,statusbar:!1,autoresize_min_height:200,plugins:["autoresize advlist autolink lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime media nonbreaking save table contextmenu directionality","emoticons template paste textcolor colorpicker textpattern imagetools responsivefilemanager"],toolbar1:"fontsizeselect | bullist numlist | outdent indent blockquote | link unlink | alignleft aligncenter alignright alignjustify",toolbar2:"bold italic underline strikethrough | forecolor backcolor | table hr charmap emoticons | image media responsivefilemanager code",toolbar_items_size:"small",paste_data_images:!0,content_css:baseURL+"assets/css/tinymce.css",image_advtab:!0,external_filemanager_path:baseURL+"files/filemanager/",filemanager_title:"File Manager",external_plugins:{filemanager:baseURL+"files/filemanager/plugin.min.js"},init_instance_callback:function(e){t.fireEvent("onLoad",[e])}})):(t.destroy(),t.element.tinymce({theme:"modern",autoresize_min_height:400,plugins:["autoresize advlist autolink lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime media nonbreaking save table contextmenu directionality","emoticons template paste textcolor colorpicker textpattern imagetools responsivefilemanager"],toolbar1:"fontselect fontsizeselect | removeformat | bullist numlist | outdent indent blockquote | styleselect formatselect | link unlink",toolbar2:"paste | bold italic underline strikethrough | subscript superscript | forecolor backcolor | alignleft aligncenter alignright alignjustify | table hr charmap emoticons | image media responsivefilemanager code",toolbar_items_size:"small",paste_data_images:!0,content_css:baseURL+"assets/css/tinymce.css",image_advtab:!0,external_filemanager_path:baseURL+"files/filemanager/",filemanager_title:"File Manager",external_plugins:{filemanager:baseURL+"files/filemanager/plugin.min.js"},init_instance_callback:function(e){t.fireEvent("onLoad",[e])}}))},t.getValue=function(){var e=$(t.element.tinymce().getBody()).html().trim();return'<p><br data-mce-bogus="1"></p>'==e?"":e},t.setValue=function(e){t.element.html(e)},t.isValid=function(){var e=!0,n=t.getValue();return!1===t.settings.allowBlank&&empty(n)?(e=!1,t.element.parent().addClass("has-error")):t.element.parent().removeClass("has-error"),e},t.destroy=function(){if(void 0!=tinymce&&tinymce.editors&&tinymce.editors.length>0)for(var e=tinymce.editors.length-1;e>=0;e--)tinymce.editors[e].remove()},t.renderTo=function(e){empty(e)||(t.element.appendTo(e),t.parent=e,setTimeout(function(){t.initMCE()},1))},t.init(e),t.createComponent(),t.renderTo(t.settings.renderTo),t},ImageBox:function(e){implements(this,Imat.EventListener,Imat.BaseComponent);var t=this;return t.data={x1:0,y1:0,x2:0,y2:0,w:0,h:0},t.button=$("<a>",{href:"javascript:void(0)",class:"imat btn btn-success"}),t.hapus=$("<a>",{href:"javascript:void(0)",class:"imat btn btn-danger"}),t.buttongroup=$("<div>",{class:"btn-group btn-group-imagebox"}),t.input=$("<input>",{type:"file",class:"imat imagebox-input"}),t.image=$("<img>",{class:"imat imagebox-image",alt:"",width:"100%"}),t.wrap=$("<div>",{class:"imat imagebox-wrap"}),t.element=$("<div>",{class:"imat imagebox"}),t.buttongroup.append(t.button).append(t.hapus),t.wrap.append(t.image),t.element.append(t.wrap),t.element.append(t.buttongroup),t.element.append(t.input),t.init=function(e){t.settings=$.extend({},Imat.defaultSettings,{path:"tmp",crop:!0,aspectRatio:!1,minWidth:"",maxWidth:"",minHeight:"",maxHeight:"",cropWidth:"",cropHeight:"",position:"center",scale:"",value:"",dataIndex:"",title:"",extensions:["gif","png","jpg","jpeg"]},e)},t.createComponent=function(){t.initLayout(t.element),t.element.setId(t.settings.dataIndex),t.element.setCss("min-width",t.settings.minWidth),t.element.setCss("max-width",t.settings.maxWidth),t.element.setCss("min-height",t.settings.minHeight),t.element.setCss("max-height",t.settings.maxHeight),"center"==t.settings.position?(t.element.setCss("text-align","center"),t.element.setCss("margin","auto")):t.image.setCss("width","100%"),t.button.text("Browse"),t.button.setIcon("image"),t.hapus.text("Hapus"),t.hapus.setIcon("eraser"),t.hapus.setCss("float","right"),t.hapus.click(function(e){t.image.attr("src",""),t.image.attr("filename","")}),t.input.change(function(e){var n=t.element.attr("id"),a=$("<form>",{action:baseURL+"api/v2/gambar/upload",method:"POST",id:n+"-form",name:n+"-form"}),s=$(this).clone();s.attr("id",n+"-source"),s.attr("name",n+"-source"),s.appendTo(a);var i=s.val().split(".").pop().toLowerCase();-1==$.inArray(i,t.settings.extensions)?new Imat.MessageBox({size:"modal-sm",type:"critical",title:"Peringatan",text:"Extension tidak valid"}):($("body").append(a),a.ajaxForm({data:{isAjax:"YES",inputID:n+"-source",path:t.settings.path},success:t.uploadSuccess}),a.submit())})},t.uploadSuccess=function(e,n){var a=baseURL+"user/gambar/view/"+t.settings.path+"/"+e.filename;if(t.settings.crop){var s=t.settings.cropWidth>e.divWidth?e.divWidth:t.settings.cropWidth,i=t.settings.cropHeight>e.divHeight?e.divHeight:t.settings.cropHeight,o=$("<div>",{class:"imat imagebox-crop-container"}).width(e.divWidth),r=$("<img>",{src:a,width:e.divWidth,height:e.divHeight}),l=$("<div>",{class:"imat imagebox-cropper"}).width(s).height(i);t.data.x2=e.divWidth,t.data.y2=e.divHeight,t.data.w=e.divWidth,t.data.h=e.divWidth,t.data.scaleWidth=t.settings.scale,t.data.filename=e.filename,t.data.path=t.settings.path,$.extend(t.data,e),o.append(l),o.append(r),l.resizable({containment:o,resize:t.getPosition}),l.draggable({containment:o,drag:t.getPosition}),l.setCss("position","absolute"),t.modal=new Imat.Modal({title:"Crop Image",iconCls:"image",items:[{xtype:"html",content:o}],footer:{xtype:"button",text:"Crop",iconCls:"crop",handler:t.crop}})}else t.image.setAttr("src",a),t.image.setAttr("filename",e.filename),t.isValid()},t.getPosition=function(e,n){var a=$(this);t.data.x1=a.position().left,t.data.y1=a.position().top,t.data.x2=a.position().left+a.width(),t.data.y2=a.position().top+a.height(),t.data.w=a.width(),t.data.h=a.height()},t.crop=function(){$.ajax({type:"POST",url:t.settings.url,data:t.data,success:function(e){t.image.attr("src",baseURL+"user/gambar/view/"+t.settings.path+"/"+e.filename),t.image.attr("filename",e.filename),t.modal.close(),t.isValid()},dataType:"json"})},t.setValue=function(e){t.image.attr("src",e)},t.getValue=function(){return t.image.attr("filename")},t.isValid=function(){var e=t.getValue(),n=!0;return!1===t.settings.allowBlank&&empty(e)?(n=!1,t.element.parent().addClass("has-error")):t.element.parent().removeClass("has-error"),n},t.init(e),t.createComponent(),t.renderTo(t.settings.renderTo),t},Form:function(e){implements(this,Imat.BaseComponent,Imat.ContainerComponent);var t=this;return t.element=$("<form>",{method:"POST"}),t.init=function(e){t.settings=$.extend({},Imat.defaultSettings,{type:"default",items:[],labelWidth:"",url:""},e),t.items=t.settings.items,t.itemArray=[],t.itemObject={}},t.createComponent=function(){t.initComponent(t.element),t.element.setClass("form-"+t.settings.type),t.createItems()},t.createItems=function(){for(var e=0,n=0;n<t.items.length;n++)if(null!==t.items[n]){var a=t.items[n],s=$("<div>",{class:"form-group"}),i=$("<label>",{class:"control-label"}).setClass(t.settings.labelWidth);if("object"==typeof a&&a.constructor===Array)for(var o=0;o<a.length;o++){(r=t.getComponent(a[o])).renderTo(s),t.addItem(r,e),e++}else{var r,l=(r=t.getComponent(a)).getSettings().fieldLabel;void 0==l||empty(l)||(i.html(l),i.appendTo(s)),r.renderTo(s),t.addItem(r,e),e++}t.element.append(s)}},t.serializeObject=function(){return t.element.serializeObject()},t.isValid=function(){var e=!0;return $.each(t.itemObject,function(t,n){var a=n;"function"!=typeof a.isValid||a.isValid()||(e=!1,a.getElement().blur())}),e},t.showValue=function(e){$.each(t.itemObject,function(t,n){var a=n;if("function"==typeof a.setValue&&"function"==typeof a.getId){var s=a.getId();void 0!=e&&void 0!=e[s]?a.setValue(e[s]):a.setValue("")}})},t.showField=function(e){t.element.find("#"+e).closest(".form-group").show()},t.hideField=function(e){t.element.find("#"+e).closest(".form-group").hide()},t.setLabel=function(e,n){t.element.find("#"+e).closest(".control-label").html(n)},t.submit=function(e){e=$.extend({dataType:"json",url:t.settings.url},e);handler=void 0!=e.success?e.success:null,e.success=function(e,t,n){e.success||void 0==e.redirect||(parent.location=e.redirect),"function"==typeof handler&&handler.call(this,e,t,n)},t.element.ajaxForm(e),t.element.submit()},t.post=function(e){var n=$.extend({},e.params,t.serializeObject());e=$.extend({method:"POST",dataType:"json",url:t.settings.url,data:n},e);handler=void 0!=e.success?e.success:null,e.success=function(e,t,n){e.success||void 0==e.redirect||(parent.location=e.redirect),"function"==typeof handler&&handler.call(this,e,t,n)},$.ajax(e)},t.init(e),t.createComponent(),t.renderTo(t.settings.renderTo),t},NavBar:function(e){implements(this,Imat.BaseComponent,Imat.ContainerComponent);var t=this;return t.element=$("<div>",{class:"navbar navbar-default"}),t.container=$("<div>",{class:"container-fluid"}),t.navbarLeft=$("<form>",{class:"navbar-form"}),t.navbarRight=$("<form>",{class:"navbar-form"}),t.navbarHeader=$(['<div class="navbar-header">','<button type="button" class="navbar-toggle collapsed" data-toggle="collapse">','<span class="sr-only">Toggle navigation</span>','<span class="icon-bar"></span>','<span class="icon-bar"></span>','<span class="icon-bar"></span>',"</button>","</div>"].join("")),t.table=$(['<table width="100%">',"<tr>",'<td class="tableLeft" align="left"></td>','<td class="tableRight" align="right"></td>',"</tr>","</table>"].join("")),t.navbarLeft.appendTo(t.table.find(".tableLeft")),t.navbarRight.appendTo(t.table.find(".tableRight")),t.element.append(t.container).append(t.navbarHeader).append(t.table),t.navbarRight.hover(function(){t.element.stop().animate({scrollLeft:t.table.outerWidth()+20},500)}),t.navbarLeft.hover(function(){t.element.stop().animate({scrollLeft:0},500)}),t.init=function(e){t.settings=$.extend({},Imat.defaultSettings,{collapse:"right",icon:"",items:[]},e),t.items=t.settings.items,t.itemArray=[],t.itemObject={}},t.createComponent=function(){t.initComponent(t.element),t.navbarLeft.setClass("collapse navbar-collapse","both"==t.settings.collapse||"left"==t.settings.collapse),t.navbarRight.setClass("collapse navbar-collapse","both"==t.settings.collapse||"right"==t.settings.collapse),t.createItems(),t.navbarHeader.find(".navbar-toggle").setAttr("data-target","#"+t.getId()+" .navbar-collapse"),empty(t.settings.icon)||t.navbarHeader.find(".navbar-toggle").html($("<span>",{class:"fa fa-"+t.settings.icon})),"none"==t.settings.collapse&&t.navbarHeader.remove()},t.createItems=function(){for(var e="both"!=t.settings.collapse&&"left"!=t.settings.collapse?$("<div>",{class:"form-group"}).appendTo(t.navbarLeft):null,n="both"!=t.settings.collapse&&"right"!=t.settings.collapse?$("<div>",{class:"form-group"}).appendTo(t.navbarRight):null,a=0;a<t.items.length;a++)if(null!==t.items[a]){var s=t.getComponent(t.items[a]),i=$("<div>",{class:"form-group"});if(s){var o=s.getSettings().navClass;i.addClass(o),"right"==s.getSettings().position?"both"==t.settings.collapse||"right"==t.settings.collapse?(s.renderTo(i),i.appendTo(t.navbarRight)):s.renderTo(n):"both"==t.settings.collapse||"left"==t.settings.collapse?(s.renderTo(i),i.appendTo(t.navbarLeft)):s.renderTo(e),i.find(".dropdown-menu").addClass("onNavBar"),null!=n&&n.find(".dropdown-menu").addClass("onNavBar"),null!=e&&e.find(".dropdown-menu").addClass("onNavBar")}t.addItem(s,a)}},$(window).off("show.bs.dropdown"),$(window).on("show.bs.dropdown",function(e){if((dropdownMenu=$(e.target).find(".dropdown-menu")).hasClass("onNavBar")){$("body").append(dropdownMenu.detach());var t=$(e.target).offset();dropdownMenu.css({display:"block",top:t.top+$(e.target).outerHeight(),left:t.left})}}),$(window).off("hide.bs.dropdown"),$(window).on("hide.bs.dropdown",function(e){dropdownMenu.hasClass("onNavBar")&&($(e.target).append(dropdownMenu.detach()),dropdownMenu.hide())}),t.init(e),t.createComponent(),t.renderTo(t.settings.renderTo),t},Navs:function(e){implements(this,Imat.BaseComponent,Imat.ContainerComponent);var t=this;return t.element=$("<div>",{class:"navs"}),t.nav=$("<ul>",{class:"nav"}),t.content=$("<div>",{class:"tab-content"}),t.init=function(e){t.settings=$.extend({},Imat.defaultSettings,{type:"tabs",stacked:!1,items:[]},e),t.items=t.settings.items,t.itemArray=[],t.itemObject={}},t.createComponent=function(){if(t.initComponent(t.element),t.createItems(),t.nav.setClass("nav-"+t.settings.type),t.nav.setClass(t.settings.stacked?"nav-stacked":""),t.settings.stacked){var e=$("<div>",{class:"row"});e.append($("<div>",{class:"col-sm-3"}).append(t.nav)),e.append($("<div>",{class:"col-sm-9"}).append(t.content)),t.element.append(e)}else t.element.append(t.nav).append(t.content)},t.createItems=function(){for(var e=0;e<t.items.length;e++)if(null!==t.items[e]){var n=t.getComponent(t.items[e]),a=$("<div>",{class:"tab-pane fade"}),s=$("<li>"),i=$("<a>");n&&(a.setClass(0==e?"in active":""),a.setId(n.getId()+"-content"),i.setAttr("data-toggle",t.settings.type.substring(0,t.settings.type.length-1)),i.setAttr("href","#"+n.getId()+"-content"),i.html(n.getSettings().title),i.setLabel(n.getSettings().label),i.setBadge(n.getSettings().badge),s.setClass(0==e?"active":""),n.renderTo(a)),a.appendTo(t.content),s.append(i).appendTo(t.nav),t.addItem(n,e)}},t.init(e),t.createComponent(),t.renderTo(t.settings.renderTo),t},Modal:function(e){implements(this,Imat.BaseComponent,Imat.ContainerComponent,Imat.EventListener);var t=this;return t.afterShow=function(e){t.addEvent("afterShow",e)},t.afterClose=function(e){t.addEvent("afterClose",e)},t.element=$("<div>",{class:"imat modal fade modal-vcenter"}),t.dialog=$("<div>",{class:"modal-dialog"}),t.content=$("<div>",{class:"modal-content"}),t.header=$("<div>",{class:"modal-header"}),t.body=$("<div>",{class:"modal-body"}),t.footer=$("<div>",{class:"modal-footer"}),t.backdrop=$("<div>",{class:"imat modal-backdrop fade"}).appendTo("body"),t.content.append(t.header),t.content.append(t.body),t.content.append(t.footer),t.dialog.append(t.content),t.element.append(t.dialog),t.zIndex=$(".modal").last().css("z-index")+50,t.init=function(e){t.settings=$.extend({},Imat.defaultSettings,{iconCls:"",title:"",footer:"",size:"",renderTo:"body",center:!0,padding:!0,items:[]},e),t.items=t.settings.items,t.itemArray=[],t.itemObject={}},t.createComponent=function(){t.initLayout(t.dialog),t.initLayout(t.content),t.createItems(),t.setHeader(t.settings.title),t.setFooter(t.settings.footer),t.dialog.setClass(t.settings.size),t.content.setClass(t.settings.size),t.header.setIcon(t.settings.iconCls),t.header.setBadge(t.settings.badge),t.header.setLabel(t.settings.label),t.header.append('<button type="button" class="close" data-dismiss="modal">&times;</button>'),t.header.find("button").click(function(){t.close()}),t.content.draggable({handle:".modal-header"}),t.body.setClass("no-padding",!t.settings.padding),t.element.setClass("fullsize",!empty(t.settings.height))},t.createItems=function(){for(var e=0;e<t.items.length;e++)if(null!==t.items[e]){var n=t.getComponent(t.items[e]);n&&n.renderTo(t.body),t.addItem(n,e)}},t.center=function(e){"function"==typeof e.hasClass&&e.hasClass("modal")&&((e.length?e:$(".modal-vcenter:visible")).each(function(e){var t=$(this).clone().css("display","block").appendTo("body"),n=Math.round((t.height()-t.find(".modal-content").height())/2);n=n>0?n:0,t.remove(),$(this).find(".modal-content").css("margin-top",n)}),$(window).on("resize",t.center))},t.show=function(){t.backdrop.setCss("z-index",t.zIndex+1),t.element.setCss("z-index",t.zIndex+2),t.backdrop.addClass("in"),t.element.addClass("in"),$("body").addClass("modal-open"),t.settings.center&&$(window).width()>800&&t.center(t.element),t.fireEvent("afterShow",["satu","dua"])},t.close=function(){t.element.removeClass("in"),t.backdrop.removeClass("in"),setTimeout(function(){t.element.remove(),t.backdrop.remove(),$("body").find(".modal").length<=0&&$("body").removeClass("modal-open"),t.fireEvent("afterClose",["satu","dua"])},200)},t.init(e),t.createComponent(),t.renderTo(t.settings.renderTo),setTimeout(function(){t.show()},200),t},MessageBox:function(e){var t=$.extend({title:"ini title",type:"success",size:"modal-msg",text:"ini messagebox",buttons:[]},e),n=null;t.buttons.length<1&&(t.buttons=[{xtype:"button",iconCls:"check-circle",text:"Ok",position:"right",handler:function(){n.close()}}]);var a=$("<div>",{class:"imat-msg-container"}),s=$("<div>",{class:"imat-msg-wrapper"}),i=$("<div>",{class:"imat-msg-wrapper",html:t.text}),o=$("<div>",{class:"imat-msg imat-msg-"+t.type});return s.append(o),a.append(s),a.append(i),n=new Imat.Modal({title:t.title,size:t.size,width:t.width,footer:{xtype:"navbar",collapse:"none",items:t.buttons},items:[{xtype:"html",content:a}]})},Notify:function(e){var t=this,n=$.extend({text:"Ini message notifier",color:"",iconCls:"",position:"top-center"},e);return t.element=$("<div>",{class:"imat-notify imat-notify-"+n.position+" "+n.color,text:n.text}),t.element.append($("<button>",{type:"button",class:"close",text:"×"})),t.element.setIcon(n.iconCls),t.element.appendTo("body"),t.element.fadeIn("slow"),t.element.find("button").click(function(){t.hide()}),t.hide=function(){void 0!=t.element&&t.element.fadeOut("slow",function(){t.element.remove()})},setTimeout(t.hide,2e3),t},Panel:function(e){implements(this,Imat.BaseComponent,Imat.ContainerComponent);var t=this,n={};return t.element=$("<div>",{class:"panel panel-default"}),t.header=$("<div>",{class:"panel-heading"}),t.body=$("<div>",{class:"panel-body"}),t.footer=$("<div>",{class:"panel-footer"}),t.tools=$("<div>",{class:"panel-tools"}),t.element.append(t.header).append(t.body).append(t.footer),t.init=function(e){t.settings=$.extend({},Imat.defaultSettings,{iconCls:"",title:"",footer:"",size:"",fullSize:!1,padding:!0,items:[],tools:[]},e),t.items=t.settings.items,t.itemArray=[],t.itemObject={}},t.createComponent=function(){t.initComponent(t.element),t.createItems(),t.createTools(),t.setHeader(t.settings.title),t.setFooter(t.settings.footer),t.element.setClass(t.settings.size),t.element.setClass("fullsize",t.settings.fullSize),t.body.setClass("no-padding",!t.settings.padding),t.header.setIcon(t.settings.iconCls),t.header.setBadge(t.settings.badge),t.header.setLabel(t.settings.label),t.header.append(t.tools)},t.createItems=function(){for(var e=0;e<t.items.length;e++)if(null!==t.items[e]){var n=t.getComponent(t.items[e]);n&&n.renderTo(t.body),t.addItem(n,e)}},t.createTools=function(){for(var e=t.settings.tools,a=0;a<e.length;a++)if(null!==e[a]){var s=t.getComponent(e[a]);s&&(s.renderTo(t.tools),"function"==typeof s.getId&&(n[s.getId]=s))}},t.getTool=function(e){return n[e]},t.init(e),t.createComponent(),t.renderTo(t.settings.renderTo),t},Store:function(e){implements(this,Imat.EventListener);var t=this;t.beforeLoad=function(e){t.addEvent("beforeLoad",e)},t.afterLoad=function(e){t.addEvent("afterLoad",e)},t.completeLoad=function(e){t.addEvent("completeLoad",e)},t.onLoad=function(e){t.addEvent("onLoad",e)},t.onError=function(e){t.addEvent("onError",e)},t.onChange=function(e){t.addEvent("onChange",e)},t.params={},t.storeData=null,t.dataChanged=[],t.isSaved=!1,t.init=function(){t.settings=$.extend({type:"json",url:"",data:{},params:{start:0,limit:20,orderBy:"",sortBy:""}},e)},t.empty=function(){t.dataChanged=[],t.storeData={rows:[],totalRows:0},t.fireEvent("onLoad",[t.storeData,t.params])},t.load=function(e){t.fireEvent("beforeLoad",[t.storeData]);e=e||{};switch(t.settings.type){case"json":var n=$.extend(t.settings.params,e.params);t.params=n,t.dataChanged=[];var a=void 0==n.global||n.global;$.ajax({type:"POST",url:t.settings.url,data:n,global:a,dataType:t.settings.type,success:function(e){e.success||void 0==e.redirect||(parent.location=e.redirect),void 0!=e.rows&&void 0!=e.totalRows?(t.storeData=e,t.fireEvent("onLoad",[t.storeData,t.params])):(t.storeData={},t.fireEvent("onError",[{status:!1,message:"Format Data Tidak Sesuai"}]))},error:function(){t.fireEvent("onError",[{status:!1,message:"Data Tidak Ditemukan"}])},complete:function(){t.fireEvent("afterLoad",[t.storeData]),t.fireEvent("completeLoad",["satu","dua"])}});break;case"array":void 0!=t.settings.data.rows&&void 0!=t.settings.data.totalRows?(t.storeData=t.settings.data,t.fireEvent("onLoad",[t.storeData,t.params])):t.fireEvent("onError",[{status:!1,message:"Data JSON Tidak Ditemukan"}]),t.fireEvent("afterLoad",[t.storeData]),t.fireEvent("completeLoad",["satu","dua"])}},t.searchData=function(e,t,n){for(var a=null,s=0;s<e.length;s++)if(e[s][t]==n){a=s;break}return a};var n=function(e){var t=e.replace(/[$,]/g,"").replace(/\./g,"").replace(/,/g,".").replace(/\%/g,"");return!isNaN(t)},a=function(e){var t=new Date(e);return!isNaN(t)};return t.sort=function(e,s){s=s,e=e;t.storeData.rows=t.storeData.rows.sort(function(t,i){var o=t[e],r=i[e];return isNaN(o)||isNaN(r)?a(o)&&a(r)?(o=new Date(o),r=new Date(r)):n(o)&&n(r)&&(o=parseFloat(o.replace(/[$,]/g,"").replace(/\./g,"").replace(/,/g,".").replace(/\%/g,"")),r=parseFloat(r.replace(/[$,]/g,"").replace(/\./g,"").replace(/,/g,".").replace(/\%/g,""))):(o=parseFloat(o),r=parseFloat(r)),"ASC"==s?o>r:r>o}),t.fireEvent("onLoad",[t.storeData,t.params]),t.fireEvent("afterLoad",[t.storeData]),t.fireEvent("completeLoad",["satu","dua"])},t.getParams=function(){return t.params},t.getData=function(){return t.storeData},t.setData=function(e){t.settings.data=e},t.getSetting=function(){return t.settings},t.getChanged=function(e,n,a){return $.trim(t.storeData.rows[e][n])!=$.trim(a)?(rows=$.extend({indexRow:e},t.storeData.rows[e]),null==t.searchData(t.dataChanged,"indexRow",e)&&t.dataChanged.push(rows),t.dataChanged[t.searchData(t.dataChanged,"indexRow",e)][n]=a,t.fireEvent("onChange",[{index:e,data:[t.dataChanged[t.searchData(t.dataChanged,"indexRow",e)]]}]),!0):(null!=t.searchData(t.dataChanged,"indexRow",e)&&(t.dataChanged[t.searchData(t.dataChanged,"indexRow",e)][n]=a),!1)},t.init(),t},Thumbnails:function(e){implements(this,Imat.BaseComponent,Imat.EventListener);var t=this;return t.onItemClick=function(e){t.addEvent("onItemClick",e)},t.onItemDblClick=function(e){t.addEvent("onItemDblClick",e)},t.container=$("<div>",{class:"thumb-container"}),t.element=$("<ul>",{class:"thump-wrapper"}),t.pagination=$("<nav>",{class:"navbar navbar-default navbar-pagination"}),t.data=null,t.store=null,t.params=null,t.rowsCount=0,t.pageCount=0,t.page=1,t.start=0,t.limit=15,t.orderBy=null,t.sortBy=null,t.selectPage=null,t.selectedRow=null,t.selectedColumn=null,t.selectedRecord=null,t.lastRow=null,t.init=function(e){t.settings=$.extend({},Imat.defaultSettings,{id:"",autoLoad:!1,fullSize:!1,pagination:"advanced",fieldName:"images",imageWidth:150,imageHeight:150,store:{type:"json",params:{start:0,limit:15,orderBy:"",sortBy:""}},columns:[]},e),"function"==typeof t.settings.store?(t.store=t.settings.store,t.data=t.store.getData()):t.store=new Imat.Store(t.settings.store),t.store.onLoad(function(e,n){t.data=e,t.params=n,t.start=t.params.start,t.limit=t.params.limit,t.page=t.start/t.limit+1,t.load()}),t.store.onError(function(e){alert(e.message)})},t.load=function(){if(t.element.empty(),null!=t.data){t.rowsCount=t.data.rows.length,t.totalRows=t.data.totalRows,t.setCaption();for(var e=0;e<t.rowsCount;e++){var n=t.data.rows[e],a=$("<li>"),s=$("<img>",{src:baseURL+n[t.settings.fieldName]});a.setCss("width",t.settings.imageWidth),a.setCss("height",t.settings.imageHeight),a.append(s),t.element.append(a)}t.createListener()}null!=t.selectPage&&t.selectPage.setValue(t.limit)},t.createListener=function(){t.element.find("li").click(function(){t.element.find("li").removeClass("selected"),$(this).addClass("selected");var e=$(this).index();t.selected=e,t.selectedRecord=t.data.rows[e],t.fireEvent("onItemClick",[t.selectedRecord])}),t.element.find("li").dblclick(function(){t.fireEvent("onItemDblClick",[t.selectedRecord])})},t.createPagination=function(){for(var e=$("<form>",{class:"navbar-form navbar-left"}),n=$("<form>",{class:"navbar-form navbar-right hidden-xs"}),a=$("<div>",{class:"form-group"}),s=$("<div>",{class:"form-group"}),i=[],o=10;o<=100;o+=5)i.push({key:o,value:o});t.selectPage=new Imat.ComboBox({data:i,renderTo:s,select2:!1,onChange:function(){t.limit=parseInt(this.getValue()),t.store.load({params:{limit:t.limit}})},onLoad:function(){this.setValue(t.limit)}}),s.prepend($("<span>",{class:"form-control-static hidden-xs",text:"Jumlah Per Halaman"})),a.append($("<a>",{class:"btn btn-default",href:"javascript:void(0)",id:"table-first"}).setIcon("resultset-first")),a.append($("<a>",{class:"btn btn-default",href:"javascript:void(0)",id:"table-previous"}).setIcon("resultset-previous")),a.append($("<input>",{class:"form-control",href:"javascript:void(0)",id:"table-page",value:"1"})),a.append($("<span>",{class:"form-control-static hidden-xs",href:"javascript:void(0)",id:"table-page-count",text:"dari 1"})),a.append($("<a>",{class:"btn btn-default",href:"javascript:void(0)",id:"table-next"}).setIcon("resultset-next")),a.append($("<a>",{class:"btn btn-default",href:"javascript:void(0)",id:"table-last"}).setIcon("resultset-last")),a.append($("<a>",{class:"btn btn-default",href:"javascript:void(0)",id:"table-refresh"}).setIcon("arrow-refresh")),a.append($("<span>",{class:"form-control-static hidden-xs",href:"javascript:void(0)",id:"table-show",text:"Tidak ada Data untuk ditampilkan"})),a.find("a").click(function(){var e=$(this).attr("id");t.setPage(e)}),a.find("input").keypress(function(e){if(13==e.which){e.preventDefault();var n=parseInt($(this).val());isNaN(n)||t.loadPage(n)}}),e.append(a),n.append(s),t.pagination.append(e),t.pagination.append(n),"simple"==t.settings.pagination&&t.pagination.find(".hidden-xs").hide()},t.createComponent=function(){t.initLayout(t.container),t.element.setId(t.settings.id),"hidden"!=t.settings.pagination?(t.createPagination(),t.container.append(t.pagination)):t.element.setCss("margin-bottom","0"),t.container.setCss("width",t.settings.width),t.container.setCss("height",t.settings.height),t.container.setClass("fullsize",t.settings.fullSize),t.container.append(t.element),t.settings.autoLoad&&t.store.load()},t.loadPage=function(e){null!=t.data&&(t.page=e,t.start=(e-1)*t.limit,t.store.load({params:{start:t.start,limit:t.limit}}))},t.setPage=function(e){switch(t.pageCount=Math.ceil(t.totalRows/t.limit),e){case"table-first":1!=t.page&&t.loadPage(1);break;case"table-last":t.page!=t.pageCount&&t.loadPage(t.pageCount);break;case"table-next":t.page<t.pageCount&&t.loadPage(t.page+1);break;case"table-previous":t.page>1&&t.loadPage(t.page-1);break;case"table-refresh":t.store.load()}},t.setCaption=function(){var e=t.start+1,n=t.start+t.limit;t.totalRows>0&&(n=n>t.totalRows?t.totalRows:n,t.pageCount=Math.ceil(t.totalRows/t.limit),t.pagination.find("#table-page").val(t.page),t.pagination.find("#table-page-count").html("dari "+t.pageCount),t.pagination.find("#table-show").html("Menampilkan data "+e+"-"+n+" dari "+t.totalRows))},t.renderTo=function(e){empty(e)||(t.container.appendTo(e),t.parrent=e)},t.init(e),t.createComponent(),t.renderTo(t.settings.renderTo),t},DataTable:function(e){implements(this,Imat.BaseComponent,Imat.EventListener);var t=this;return t.onCellClick=function(e){t.addEvent("onCellClick",e)},t.onItemClick=function(e){t.addEvent("onItemClick",e)},t.onItemDblClick=function(e){t.addEvent("onItemDblClick",e)},t.container=$("<div>",{class:"table-responsive"}),t.wrapper=$("<div>",{class:"table-wrapper"}),t.fixed=$("<div>",{class:"table-fixed"}),t.element=$("<table>",{class:"table"}),t.pagination=$("<nav>",{class:"navbar navbar-default navbar-pagination"}),t.head=$("<thead>"),t.body=$("<tbody>"),t.data=null,t.store=null,t.params=null,t.rowsCount=0,t.pageCount=0,t.page=1,t.start=0,t.limit=20,t.orderBy=null,t.sortBy=null,t.selectPage=null,t.selectedRow=null,t.selectedColumn=null,t.selectedRecord=null,t.lastRow=null,t.fields=[],t.init=function(e){t.settings=$.extend({},Imat.defaultSettings,{id:"",autoLoad:!1,fullSize:!1,wrap:!1,dragable:!1,bordered:!0,striped:!0,pagination:"advanced",sort:"local",store:{type:"json",params:{start:0,limit:20,orderBy:"",sortBy:""}},columns:[]},e),"function"==typeof t.settings.store?(t.store=t.settings.store,t.data=t.store.getData()):t.store=new Imat.Store(t.settings.store),t.store.onLoad(function(e,n){t.data=e,t.params=n,t.start=t.params.start,t.limit=t.params.limit,t.page=t.start/t.limit+1,t.load()}),t.store.onError(function(e){alert(e.message)})},t.load=function(){if(t.body.empty(),null!=t.data){t.rowsCount=t.data.rows.length,t.totalRows=t.data.totalRows,t.setCaption();for(var e=0;e<t.rowsCount;e++){var n=t.data.rows[e],a=$("<tr>");void 0!=n.highlight&&a.addClass(n.highlight),t.createColumn(a,n,e),t.body.append(a)}t.createListener()}null!=t.selectPage&&t.selectPage.setValue(t.limit)},t.clear=function(){t.store.storeData={totalRows:0,rows:[]},t.data={totalRows:0,rows:[]},t.load()},t.addRow=function(e,n){n=n||0,t.data.rows.push(e),t.data.totalRows+=1,t.store.storeData.rows.push(e);var a=t.data.rows.length-1,s=t.data.rows[a],i=$("<tr>");t.createColumn(i,s,a),t.body.append(i),t.createListener(),t.body.find("tr").last().find("td").eq(n).click()},t.createListener=function(){t.body.children("tr").children("td").click(function(){t.body.find("tr").removeClass("selected"),$(this).parent().addClass("selected");var e=$(this).parent().index(),n=$(this).index();t.selectedRow=e,t.selectedColumn=n,t.selectedRecord=t.data.rows[e];var a=t.settings.columns[n].editor||null,s=t.selectedRecord.locked||!1;a&&0==s&&void 0==$(this).attr("disabled")&&(a.editable||void 0==a.editable)&&(t.fireEvent("onCellClick",[t.selectedRecord,t.selectedColumn]),t.createEditor($(this))),t.selectedRow==t.lastRow&&0!=t.settings.dragable||(t.fireEvent("onItemClick",[t.selectedRecord]),t.lastRow=t.selectedRow)}),t.body.children("tr").children("td").dblclick(function(){t.fireEvent("onItemDblClick",[t.selectedRecord])})},t.createEditor=function(e,n,a,s){n=void 0==n?t.selectedColumn:n,a=a||0,s=s||{};var i=t.settings.columns[n],o=i.editor;if(void 0==o.padding&&(o.padding=!0),t.element.find("select").trigger("select2-blur"),o.xtype&&e.find(".table-editor").length<1){"checkbox"==o.xtype&&(o.inline=!0,o.dataIndex=i.dataIndex+a),o.onTable=!0,o.autoGrow=!0,o.emptyText="-",o.align=i.align,o.onClose=function(){g=!0};var r=Imat.CreateComponent(o),l=$("<div>",{class:"table-editor"}),d=e.find(".table-cell").attr("value"),c=e.find(".table-cell").html();void 0!=i.align&&l.addClass("align-"+i.align),l.addClass(),r.renderTo(l);var m=void 0!=s.disabled&&s.disabled[i.dataIndex],p=void 0!=s.locked&&!0===s.locked;if((void 0!=o.editable&&!1===o.editable||p||m)&&r.setDisabled(!0),e.setClass("no-padding",!o.padding),e.find(".table-cell").hide(),e.append(l),"combobox"==o.xtype&&void 0!=o.always)r.setValue(d||c),e.addClass("table-editing");else if("textbox"==o.xtype||"combobox"==o.xtype){e.addClass("table-editing"),e.removeClass("table-changed"),r.setValue(d||c),r.focus(),r.getElement().keydown(function(e){t.tabPressed(e,$(this))});var u=r.getSettings().select2?"select2-blur":"blur",g=!1;r.getElement().on(u,function(a){var s=$(this).val(),i=$(this).find("option").filter(":selected").text(),r=t.store.getChanged(t.selectedRow,t.settings.columns[n].dataIndex,s);i="-"==i?"":i,(g||"date"!=o.type)&&(e.removeClass("table-editing"),e.find(".table-editor").remove(),e.find(".table-cell").html(i||s),e.find(".table-cell").attr("value",s),e.find(".table-cell").show(),r&&e.addClass("table-changed"))})}else"checkbox"==o.xtype&&(r.setValue(d||c),r.addClass(i.dataIndex),"static"!==r.getSettings().type&&r.getElement().click(function(){var s=r.getValue();changed=t.store.getChanged(a,t.settings.columns[n].dataIndex,s),changed?e.addClass("table-changed"):e.removeClass("table-changed")}))}},t.createColumn=function(e,n,a){for(var s=0;s<t.settings.columns.length;s++){var i=n[t.settings.columns[s].dataIndex],o=t.settings.columns[s],r=void 0!=o.editor?o.editor:null,l=(o.dataIndex,$("<td>",{align:"left"})),d=$("<div>",{class:"table-cell",value:i});if(void 0!=i&&"null"!=typeof i&&null!=i||(i=""),r&&r.xtype&&"combobox"==r.xtype&&void 0==r.always||void 0!=o.data){for(var c=r&&(r.data||r.datasource.data)||o.data||[],m=null,p=0;p<c.length;p++)if(c[p].key==i){m=p;break}i=null!=m?c[m].value:""}if(d.setCss("text-align",o.align),d.setCss("width",o.width),d.html(i),void 0!=n.disabled)void 0!=n.disabled[t.settings.columns[s].dataIndex]&&(l.addClass("disabled"),l.attr("disabled",!0));if(void 0!=n.style){var u=n.style[t.settings.columns[s].dataIndex];void 0!=u&&l.addClass(u)}l.addClass(o.cls),l.setAttr("width",o.width),l.setAttr("align",o.align),l.setAttr("valign",o.valign),l.append(d),r&&("textbox"!=r.xtype&&"combobox"!=r.xtype||void 0!=r.always)&&t.createEditor(l,s,a,n),e.append(l)}},t.setColumnDataSource=function(e){var n=t.settings.columns[e].editor;void 0!=n&&void 0!=n.datasource&&"ajax"==n.datasource.type&&$.ajax({method:"POST",dataType:"json",url:n.datasource.url,data:n.datasource.params,success:function(e){e.success||void 0==e.redirect||(parent.location=e.redirect),n.datasource={type:"array",data:e.rows},t.load()}})},t.setComboDataSource=function(e,n){for(var a=0;a<t.settings.columns.length;a++)if(t.settings.columns[a].dataIndex==e){e=t.settings.columns[a];"ajax"==n.type?$.ajax({method:"POST",dataType:"json",url:n.url,data:n.params,success:function(n){n.success||void 0==n.redirect||(parent.location=n.redirect),e.editor.datasource={type:"array",data:n.rows},t.load()}}):t.settings.columns[a].editor.datasource=n}},t.createHeader=function(){if(void 0!=t.settings.customHeader){t.head.html(t.settings.customHeader),t.head.addClass("custom-header"),t.head.find("th").each(function(){var e=$(this).attr("width"),t=$("<div>",{html:$(this).html()}).css("width",e);$(this).html(t)});for(var e=0;e<t.settings.columns.length;e++){t.setColumnDataSource(e);var n=t.settings.columns[e].dataIndex;void 0===n||empty(n)||t.fields.push(n)}}else{var a=a=$("<tr>");for(e=0;e<t.settings.columns.length;e++){var s=t.settings.columns[e],i=$("<div>"),o=$("<a>",{class:"sort-table",href:"javascript:void(0)","data-index":s.dataIndex,"data-sort":""}),r=$("<th>");t.setColumnDataSource(e),void 0===s.dataIndex||empty(s.dataIndex)||t.fields.push(s.dataIndex),i.setCss("width",parseInt(s.width)-r.css("padding")),i.setCss("text-align",t.settings.headerAlign),r.setCss("width",s.width),r.addClass(s.cls),o.append(s.header),i.append(o),r.append(i),a.append(r),void 0!==s.sort&&!1===s.sort||"none"==t.settings.sort?o.off("click"):o.click(function(){var e=$(this).data("index"),n=$(this).attr("data-sort");$(this).find(".fa").remove(),$(this).closest("thead").find(".fa").remove(),"ASC"!=n?($(this).setAttr("data-sort","ASC"),$(this).setIcon("caret-up","right"),t.orderBy=e,t.sortBy="ASC"):($(this).setAttr("data-sort","DESC"),$(this).setIcon("caret-down","right"),t.orderBy=e,t.sortBy="DESC"),"local"==t.settings.sort?t.store.sort(e,t.sortBy):t.store.load({params:{orderBy:t.orderBy,sortBy:t.sortBy}})})}t.head.append(a)}t.head.appendTo(t.element)},t.createPagination=function(){for(var e=$("<form>",{class:"navbar-form navbar-left"}),n=$("<form>",{class:"navbar-form navbar-right hidden-xs"}),a=$("<div>",{class:"form-group"}),s=$("<div>",{class:"form-group"}),i=[],o=10;o<=100;o++)i.push({key:o,value:o});t.selectPage=new Imat.ComboBox({data:i,renderTo:s,select2:!1,onChange:function(){t.limit=parseInt(this.getValue()),t.store.load({params:{limit:t.limit}})},onLoad:function(){this.setValue(t.limit)}}),s.prepend($("<span>",{class:"form-control-static hidden-xs",text:"Jumlah Per Halaman"})),a.append($("<a>",{class:"btn btn-default",href:"javascript:void(0)",id:"table-first"}).setIcon("resultset-first")),a.append($("<a>",{class:"btn btn-default",href:"javascript:void(0)",id:"table-previous"}).setIcon("resultset-previous")),a.append($("<input>",{class:"form-control",href:"javascript:void(0)",id:"table-page",value:"1"})),a.append($("<span>",{class:"form-control-static",href:"javascript:void(0)",id:"table-page-count",text:"dari 1"})),a.append($("<a>",{class:"btn btn-default",href:"javascript:void(0)",id:"table-next"}).setIcon("resultset-next")),a.append($("<a>",{class:"btn btn-default",href:"javascript:void(0)",id:"table-last"}).setIcon("resultset-last")),a.append($("<a>",{class:"btn btn-default",href:"javascript:void(0)",id:"table-refresh"}).setIcon("arrow-refresh")),a.append($("<span>",{class:"form-control-static hidden-xs",href:"javascript:void(0)",id:"table-show",text:"Tidak ada Data untuk ditampilkan"})),a.find("a").click(function(){var e=$(this).attr("id");t.setPage(e)}),a.find("input").keypress(function(e){if(13==e.which){e.preventDefault();var n=parseInt($(this).val());isNaN(n)||t.loadPage(n)}}),e.append(a),n.append(s),t.pagination.append(e),t.pagination.append(n),"simple"==t.settings.pagination&&t.pagination.find(".hidden-xs").hide()},t.createComponent=function(){t.createHeader(),t.initLayout(t.container),t.element.append(t.header),t.element.setId(t.settings.id),t.element.setClass("wrap",t.settings.wrap),t.element.setClass("table-bordered",t.settings.bordered),t.element.setClass("table-striped",t.settings.striped),t.settings.fixedHeader?(t.fixed.append(t.element.clone(!0,!0)),t.fixed.setCss("margin-right",tools.getScrollBarWidth()),t.wrapper.setCss("overflow-y","scroll"),t.wrapper.setCss("position","absolute")):t.wrapper.setCss("position","relative"),"hidden"!=t.settings.pagination?(t.createPagination(),t.container.append(t.pagination)):t.wrapper.setCss("margin-bottom","0"),t.element.append(t.body),t.wrapper.append(t.element),t.wrapper.scroll(function(e){t.fixed.scrollLeft($(this).scrollLeft())}),t.container.append(t.wrapper),t.container.append(t.fixed),t.container.setCss("width",t.settings.width),t.container.setCss("height",t.settings.height),t.container.setClass("fullsize",t.settings.fullSize),t.settings.autoLoad&&t.store.load()},t.showError=function(e){for(var n=0;n<t.store.dataChanged.length;n++)-1==e.indexOf(t.store.dataChanged[n].indexRow.toString())?(t.body.find("tr").eq(t.store.dataChanged[n].indexRow).find("td").removeClass("table-changed"),t.body.find("tr").eq(t.store.dataChanged[n].indexRow).removeClass("danger"),t.store.dataChanged.slice(n)):t.body.find("tr").eq(t.store.dataChanged[n].indexRow).setClass("danger")},t.tabPressed=function(e,n){var a=n.closest("td").index(),s=n.closest("tr").find("td").length;if(9==e.keyCode&&!e.shiftKey&&a+1<s){for(var i=a+1,o=a+1;o<t.settings.columns.length;o++){if((r=t.settings.columns[o].editor)&&("textbox"==r.xtype||"combobox"==r.xtype)){i=o;break}}e.preventDefault(),next=n.closest("tr").find("td:eq("+i+")"),n.blur(),next.click()}else if(9==e.keyCode&&e.shiftKey&&a-1>=0){for(i=a-1,o=a-1;o>t.settings.columns.length;o--){var r;if((r=t.settings.columns[o].editor)&&("textbox"==r.xtype||"combobox"==r.xtype)){i=o;break}}e.preventDefault(),next=n.closest("tr").find("td:eq("+i+")"),n.blur(),next.click()}else 38==e.keyCode&&t.selectedRow-1>=0?(e.preventDefault(),next=n.closest("tbody").find("tr:eq("+(t.selectedRow-1)+")").find("td:eq("+a+")"),n.blur(),next.click()):40==e.keyCode&&t.selectedRow+1<t.data.rows.length&&(e.preventDefault(),next=n.closest("tbody").find("tr:eq("+(t.selectedRow+1)+")").find("td:eq("+a+")"),n.blur(),next.click())},t.loadPage=function(e){null!=t.data&&(t.page=e,t.start=(e-1)*t.limit,t.store.load({params:{start:t.start,limit:t.limit}}))},t.setPage=function(e){switch(t.pageCount=Math.ceil(t.totalRows/t.limit),e){case"table-first":1!=t.page&&t.loadPage(1);break;case"table-last":t.page!=t.pageCount&&t.loadPage(t.pageCount);break;case"table-next":t.page<t.pageCount&&t.loadPage(t.page+1);break;case"table-previous":t.page>1&&t.loadPage(t.page-1);break;case"table-refresh":t.store.load()}},t.setCaption=function(){var e=t.start+1,n=t.start+t.limit;t.totalRows>0?(n=n>t.totalRows?t.totalRows:n,t.pageCount=Math.ceil(t.totalRows/t.limit),t.pagination.find("#table-page").val(t.page),t.pagination.find("#table-page-count").html("dari "+t.pageCount),t.pagination.find("#table-show").html("Menampilkan data "+e+"-"+n+" dari "+t.totalRows)):(t.pagination.find("#table-page").val(""),t.pagination.find("#table-page-count").html("dari"),t.pagination.find("#table-show").html("Tidak ada data untuk ditampilkan"))},t.getChanged=function(){return void 0!=t.store.dataChanged&&t.store.dataChanged.length>0?t.store.dataChanged:null},t.renderTo=function(e){empty(e)||(t.container.appendTo(e),t.parrent=e)},t.init(e),t.createComponent(),t.renderTo(t.settings.renderTo),t},ProgressBar:function(e){implements(this,Imat.BaseComponent,Imat.InputComponent);var t=this;return t.element=$("<div>",{class:"progress"}),t.progress=$("<div>",{class:"progress-bar progress-bar-success progress-bar-striped active",role:"progressbar"}),t.element.append(t.progress),t.init=function(e){t.settings=$.extend({},Imat.defaultSettings,{dataIndex:"progress",size:"",text:"",value:""},e)},t.createComponent=function(){t.settings.id=t.settings.dataIndex,t.initComponent(t.element),t.setValue(t.settings.value),t.progress.html(t.settings.text)},t.getValue=function(){return t.progress.css("width")},t.setValue=function(e){t.progress.css("width",e)},t.setText=function(e){t.progress.html(e)},t.init(e),t.createComponent(),t.renderTo(t.settings.renderTo),t},Metrics:function(e){implements(this,Imat.BaseComponent,Imat.InputComponent);var t=this;return t.element=$('\n\t\t\t<div class="small-box">\n\t\t\t\t<div class="inner">\n\t\t\t\t\t<h3></h3>\n\t\t\t\t\t<p></p>\n\t\t\t\t</div>\n\t\t\t\t<div class="icon">\n\t\t\t\t\t<i class="fa"></i>\n\t\t\t\t</div>\n\t\t\t\t<a href="javascript:;" class="small-box-footer">\n\t\t\t\t\tMore info <i class="fa fa-arrow-circle-right"></i>\n\t\t\t\t</a>\n\t\t\t</div>'),t.number=t.element.find("h3"),t.icon=t.element.find(".icon .fa"),t.text=t.element.find("p"),t.link=t.element.find("a"),t.init=function(e){t.settings=$.extend({},Imat.defaultSettings,{dataIndex:"metrics",color:"",text:"",value:"",iconCls:"",handler:function(){}},e)},t.createComponent=function(){t.settings.id=t.settings.dataIndex,t.initComponent(t.element),t.element.addClass("bg-"+t.settings.color),t.icon.addClass("fa-"+t.settings.iconCls),t.number.html(t.settings.value),t.text.html(t.settings.text),t.link.click(function(e){var n=t.settings.handler;"function"==typeof n?n.call():"string"==typeof n&&window[n]()})},t.setValue=function(e){t.number.html(e)},t.setText=function(e){t.text.html(e)},t.init(e),t.createComponent(),t.renderTo(t.settings.renderTo),t},Chat:function(e){implements(this,Imat.BaseComponent,Imat.EventListener);var t=this;return t.element=$("<div>",{class:"direct-chat"}),t.messageContainer=$("<div>",{class:"direct-chat-messages"}),t.inputGroup=$("<div>",{class:"direct-chat-input input-group"}),t.textInput=$("<input>",{type:"text",name:"message",placeholder:"Tulis Pesan ...",class:"form-control"}),t.spanInput=$("<span>",{class:"input-group-btn"}),t.buttonInput=$("<button>",{type:"submit",class:"btn btn-xs btn-primary btn-flat",text:"Kirim"}),t.inputGroup.append(t.textInput).append(t.spanInput.append(t.buttonInput)),t.element.append(t.messageContainer),t.element.append(t.inputGroup),t.active=!0,t.timeout=null,t.state=0,t.onUpdate=function(e){t.addEvent("onUpdate",e)},t.init=function(e){t.settings=$.extend({},Imat.defaultSettings,{sendURL:"",updateURL:"",sound:"",height:250,interval:50,onUpdate:function(){}},e)},t.createComponent=function(){t.initComponent(t.element),t.messageContainer.css("height",t.settings.height),t.element.css("height","auto"),t.buttonInput.click(function(){t.sendChat()}),t.textInput.keypress(function(e){13==e.which&&(e.preventDefault(),t.sendChat())})},t.showMessage=function(e,n,a,s,i){var o=$("<div>",{class:"direct-chat-msg "+i}),r=$("<div>",{class:"direct-chat-info clearfix"}),l=$("<span>",{class:"direct-chat-name pull-left",text:e}),d=$("<span>",{class:"direct-chat-timestamp pull-right",text:n}),c=$("<img>",{class:"direct-chat-img",src:a}),m=$("<div>",{class:"direct-chat-text",html:s});r.append(l).append(d),o.append(r).append(c).append(m),t.messageContainer.append(o)},t.updateChat=function(){$.ajax({method:"POST",dataType:"json",url:t.settings.updateURL,global:!1,cache:!1,data:{interval:t.settings.interval,state:t.state},success:function(e){if(e.success||void 0==e.redirect||(parent.location=e.redirect),e.update){for(i=0;i<e.data.length;i++){var n=e.data[i];t.showMessage(n.name,n.time,n.avatar,n.message,n.direction),t.state=n.id,t.messageContainer.scrollTop(t.messageContainer.prop("scrollHeight"))}if(!t.element.is(":visible")||!document.hasFocus())new Audio(t.settings.sound).play(),null!=t.timeout&&t.fireEvent("onUpdate",[e.data]);setTimeout(function(){t.messageContainer.scrollTop(t.messageContainer.prop("scrollHeight"))},1)}t.active&&(t.timeout=setTimeout(t.updateChat,1))}})},t.sendChat=function(){empty(t.textInput.val())||($.ajax({method:"POST",dataType:"json",global:!1,data:{msg:t.textInput.val()},url:t.settings.sendURL,success:function(e){}}),t.textInput.val(""),t.textInput.blur(),t.textInput.focus())},t.destroy=function(){t.active=!1},t.init(e),t.createComponent(),t.renderTo(t.settings.renderTo),t},Loading:function(){var e=$("<div>",{class:"imat loading-backdrop"}),t=$("<div>",{class:"imat loading-container"}),n=$("<div>",{class:"imat loading-image"});t.append(n);return this.show=function(){$("body").append(e),$("body").append(t),e.show(),t.show(),$("body").addClass("loading-open")},this.hide=function(){e.remove(),t.remove(),$("body").removeClass("loading-open")},this}};