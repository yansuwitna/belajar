var FrontStatistik={init:function(){var a=this;a.createProvinsi(),a.getPie(),$(".kd_prop").change(function(){var t=$(this).attr("jenis");"X"==$(this).val()?($("#"+t+"_kd_jenjang").hide(),$("#"+t+"_chart1").show(),$("#"+t+"_chart2").hide()):($("#"+t+"_chart1").hide(),$("#"+t+"_chart2").show(),$("#"+t+"_kd_jenjang").show(),a.getBar(t))}),$(".kd_jenjang").change(function(){a.getBar($(this).attr("jenis"))}),$("#status_kd_prop").change(),$("#moda_kd_prop").change()},createProvinsi:function(){$.ajax({dataType:"json",type:"POST",url:baseURL+"api/v1/provinsi",success:function(a){$(".kd_prop").empty();for(var t=0;t<a.rows.length;t++){var e=$("<option>",{value:a.rows[t].key,html:a.rows[t].value});$(".kd_prop").append(e)}$(".kd_prop").change()}})},getBar:function(a){var t=$("#"+a+"_kd_prop").val(),e=$("#"+a+"_kd_jenjang").val();this.createBar(a+"_bar_chart",a,t,e,{status:["Mandiri","Menumpang","Belum Ditentukan"],moda:["Online","Semi Online","Belum Ditentukan"]}[a])},getPie:function(){var a=this;$.ajax({dataType:"json",type:"POST",url:baseURL+"api/v1/pie",success:function(t){a.createPie("status_",t.charts.status,t.labels.status),a.createPie("moda_",t.charts.moda,t.labels.moda)}})},getPieSiswa:function(){$.ajax({dataType:"json",type:"POST",url:baseURL+"api/v1/pieSiswa",success:function(a){for(var t=["pie1","pie2","pie3","pie4","pie5","pie6"],e=a.charts,i=a.labels,n=0;n<t.length;n++){var o=document.getElementById("siswa_"+t[n]);o.height=220,new Chart(o,{type:"doughnut",responsive:!0,maintainAspectRatio:!1,data:{datasets:[{data:e[t[n]].data,backgroundColor:["#0abb87","#5d78ff","#ffb822","#5F7161","#6D8B74","#9772FB","#EB5353"],borderWidth:1}],labels:i[t[n]]},options:{legend:{fullWidth:!0,display:!0,position:"right",labels:{boxWidth:20,fontFamily:"Courier New"}},animation:{animateScale:!0,animateRotate:!0}}}),$("#siswa_"+t[n]).parent().find("h6").html(e[t[n]].title)}}})},createPie:function(a,t,e){for(var i=["pie1","pie2","pie3","pie4","pie5","pie6"],n=0;n<i.length;n++){var o=document.getElementById(a+i[n]);new Chart(o,{type:"doughnut",data:{datasets:[{data:t[n].data,backgroundColor:["#0abb87","#5d78ff","#ffb822"],borderWidth:1}],labels:e},options:{legend:{display:!0,position:"right",labels:{boxWidth:20}},animation:{animateScale:!0,animateRotate:!0}}}),$("#"+a+i[n]).parent().find("h6").html(t[n].title)}},createBar:function(a,t,e,i,n){a="#"+a,$.ajax({dataType:"json",type:"POST",url:baseURL+"api/v1/chart",data:{kd_jenjang:i,kd_prop:e},success:function(e){$(a).height(e.height),$(a).find("canvas").remove(),$(a).append($("<canvas>"));var i=$(a).find("canvas");new Chart(i,{type:"horizontalBar",data:{labels:e.wilayah,datasets:[{label:n[0],backgroundColor:"#0abb87",borderWidth:1,data:e.charts[t].jm_1},{label:n[1],backgroundColor:"#5d78ff",borderWidth:1,data:e.charts[t].jm_2},{label:n[2],backgroundColor:"#ffb822",borderWidth:1,data:e.charts[t].jm_3}]},options:{maintainAspectRatio:!1,legend:{position:"bottom"},scales:{xAxes:[{stacked:!0,ticks:{beginAtZero:!0,steps:10,max:100}}],yAxes:[{stacked:!0}]}}})}})}};