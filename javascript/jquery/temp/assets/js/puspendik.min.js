var App={loadScript:function(t){var e=$.Deferred(),i=document.getElementById("script");return i.async="async",i.type="text/javascript",i.src=t,i.onload=i.onreadystatechange=function(t,n){i.readyState&&!/loaded|complete/.test(i.readyState)||(n?e.reject():e.resolve())},i.onerror=function(){e.reject()},e.promise()},loadClass:function(t,e,i){window[t]?i.apply():$.getScript(baseURL+"user/"+e).done(i)},loadPage:function(t){var e=$.extend({clsName:"",url:"",script:!0},t),i=baseURL+"user/"+e.url;history.pushState(null,e.clsName,i),window[e.clsName]?window[e.clsName].show():e.script?$("#script").load(i,{isLoadScript:!0}):$("#content").load(i,{isLoadScript:!0})},clearContent:function(){if(tinymce.EditorManager.editors=[],"undefined"!=typeof tinymce&&void 0!==tinymce.editors&&tinymce.editors.length>0)for(var t=tinymce.editors.length-1;t>=0;t--)void 0!==tinymce.editors[t]&&tinymce.editors[t].remove();$("#content").empty()},permalink:function(t){var e="";return empty(t)||(e=t.replace(/ /g,"-").replace(/[&\/\\#,+()$~%.'':*?<>{}]/g,"").toLowerCase()),e},reloadsecure:function(){var t=$(".securimage");t.length>0&&t.each(function(){var e=$(this).attr("src"),i=e.indexOf("?")<=0?e.length:e.indexOf("?"),n=e.substring(0,i);t.attr("src",n+"?_dc="+Math.random())})},notify:function(t){var e;$("body").find(".notify").length<=0?(e=$("<div>",{class:"alert alert-danger notify"})).prependTo($("body")):e=$("body").find(".notify"),e.html(t),e.prepend($("<span>",{class:"fa fa-info-circle"}).css("margin-right","10px")),setTimeout(function(){e.addClass("show")},10),setTimeout(function(){e.removeClass("show")},5e3)},realtime:function(){App.getRealtime()},getRealtime:function(){},refresh:function(t){"object"==typeof Ticket&&1==t.ticket&&($("#TiketPanel").is(":visible")&&Ticket.getData(),$("#PanelReply").is(":visible")&&Ticket.getReply())},notificationSend:function(t){new Notification("Informasi Web UNBK",{body:t,icon:baseURL+"assets/img/logo.png"})},createUserOnline:function(t,e){if(t){for($("ul.user-list").empty(),$(".online-count").html(e),i=0;i<t.length;i++){var n=t[i].nama_lengkap,a=t[i].group_name,s=""!=t[i].photo?"avatar/"+t[i].photo:"assets/img/avatar-0.png",o=`\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<div class="user-list-avatar">\n\t\t\t\t\t\t\t<img alt="" src="${baseURL}${s}" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class="user-list-nama">${n}</div>\n\t\t\t\t\t\t\t<div class="user-list-jabatan">${a}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>`;$("ul.user-list").append(o)}var l=$("<a>",{href:"javascript:;",id:"user-list-more",html:"Lihat Semua",class:"user-list-more"});l.click(function(){App.loadPage({clsName:"UsersOnline",url:"users/online",script:!0})}),$("ul.user-list").append(l)}},createUserNotification:function(t){t&&$(".chat-count").html(t)},notification:function(t){"function"!=typeof Notification?console.log("Notification function not exists"):"granted"===Notification.permission?App.notificationSend(t):Notification.requestPermission().then(function(e){"denied"!==e?"default"!==e?"granted"===e&&App.notificationSend(t):console.log("The permission request was dismissed."):console.log("Permission wasn not granted. Allow a retry.")})}};$(document).ready(function(){$(".js-menu").click(function(t){var e=$(this).attr("data-class"),i=$(this).attr("data-url"),n=$(this).attr("data-script"),a=$(this).attr("data-ajax"),s=$(this).attr("data-dialog")||"N";empty(i)||"#"==i||("Y"==a?("Y"!=s&&App.clearContent(),App.loadPage({clsName:e,url:i,script:n})):parent.location=baseURL+i,$(window).width()<=1024&&!$(".menu").hasClass("hide-menu")&&$("#toggle-menu").click())}),$(".side-menu > li > a").click(function(){$(".side-menu > li > a").not($(this)).next("ul").slideUp(200),$(".side-menu > li > a").not($(this)).removeClass("active"),$(this).hasClass("active")?($(this).next("ul").slideUp(200),$(this).removeClass("active")):($(this).next("ul").slideDown(200),$(this).addClass("active"))}),$(".btn-logout").click(function(){$.ajax({dataType:"json",type:"POST",url:baseURL+"logout",success:function(t){window.location=t.url}})}),$(".btn-kembali").click(function(){parent.location=baseURL+"admin"}),$("#right-nav-button").click(function(){$("#right-nav").hasClass("show")?($("#right-nav").removeClass("show"),$(this).find(".fa").removeClass("fa-chevron-right"),$(this).find(".fa").addClass("fa-chevron-left")):($("#right-nav").addClass("show"),$(this).find(".fa").removeClass("fa-chevron-left"),$(this).find(".fa").addClass("fa-chevron-right"))}),$(document).click(function(t){var e=$(t.target),i=$(".tableLeft .navbar-collapse.in, .tableRight .navbar-collapse.in");e.hasClass("navbar-toggle")||e.parents(".navbar-collapse").hasClass("collapse in")||i.closest(".navbar").find(".navbar-toggle").trigger("click")}),$(window).scroll(function(){$(document).scrollTop()>=1?$("html").css({"touch-action":"auto"}):$("html").css({"touch-action":"pan-down"})}),$(window).resize(function(){$(this).width()<=1024?($(".menu").addClass("hide-menu"),$(".header").addClass("hide-menu"),$(".wrapper-content").addClass("hide-menu"),$("#toggle-menu").off("click"),$("#toggle-menu").click(function(){$(".menu").toggleClass("hide-menu"),$(".header").toggleClass("hide-menu"),$(".wrapper-content").toggleClass("hide-menu")})):($(".menu").removeClass("hide-menu"),$(".header").removeClass("hide-menu"),$(".wrapper-content").removeClass("hide-menu"),$("#toggle-menu").off("click"),$("#toggle-menu").click(function(){$(".menu").toggleClass("hide-menu"),$(".header").toggleClass("hide-menu"),$(".wrapper-content").toggleClass("hide-menu")}));var t=$(".menu").outerHeight(),e=$(".menu-header").outerHeight();$(".side-menu").slimScroll({height:t-e})}),$(window).resize(),App.realtime(),Imat.init()});